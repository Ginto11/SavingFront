<section class="flex flex-col items-center justify-center bg-gray-900 p-6">

  <div class="text-center mb-10">
    <h2 class="text-3xl font-extrabold text-green-400">Crear cuenta</h2>
    <p class="text-gray-300 mt-2">Completa tus datos para continuar</p>
  </div>

  <form class="w-full max-w-md bg-gray-800 p-6 rounded-2xl shadow-lg space-y-5">

    <div>
      <label class="text-gray-300 font-medium" for="cedula">C√©dula</label>
      <input 
        [(ngModel)]="usuario.cedula"
        name="cedula"
        type="number"
        placeholder="Ingresa tu c√©dula"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="primerNombre">Primer nombre</label>
      <input 
        [(ngModel)]="usuario.primerNombre"
        name="primerNombre"
        type="text"
        placeholder="Ingresa tu primer nombre"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="segundoNombre">Primer apellido</label>
      <input 
        [(ngModel)]="usuario.primerApellido"
        name="segundoNombre"
        type="text"
        placeholder="Ingresa tu segundo nombre"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="usuario">Usuario</label>
      <input 
        [(ngModel)]="usuario.nombreUsuario"
        name="usuario"
        type="text"
        placeholder="Ingresa tu usuario"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="correo">Correo</label>
      <input 
        [(ngModel)]="usuario.correo"
        name="correo"
        type="email"
        placeholder="correo@ejemplo.com"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="fechaNacimiento">Fecha de nacimiento</label>
      <input 
        [(ngModel)]="usuario.fechaNacimiento"
        name="fechaNacimiento"
        type="date"
        class="w-full mt-1 p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
      />
    </div>

    <div>
      <label class="text-gray-300 font-medium" for="contrasena">Contrase√±a</label>

      <div class="relative mt-1">
        <input 
          [(ngModel)]="usuario.contrasena"
          name="contrasena"
          id="passwordReg"
          type="password"
          placeholder="Crea una contrase√±a"
          class="w-full p-3 bg-gray-700 text-white rounded-xl outline-none focus:ring-2 focus:ring-green-400"
        />

        <button
          type="button"
          onclick="const p=document.getElementById('passwordReg'); p.type = p.type === 'password' ? 'text' : 'password'"
          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-300 hover:text-white"
        >
          üëÅ
        </button>
      </div>
    </div>

    <div class="flex items-start gap-3">
      <input 
        [(ngModel)]="usuario.aceptaTerminos" 
        name="aceptaTerminos"
        type="checkbox" class="mt-1 w-5 h-5 bg-gray-700 rounded">
      <p class="text-gray-300 text-sm">
        Acepto los 
        <span class="text-green-400 cursor-pointer hover:underline">t√©rminos y condiciones</span>.
      </p>
    </div>

    <button 
      (click)="crear()"
      [ngClass]="{
        'bg-green-500 hover:bg-green-400 cursor-pointer': isRegistrando == false,
        'bg-gray-500 hover:bg-gray-400' : isRegistrando == true 
      }"
      class="w-full text-gray-900 font-semibold py-3 rounded-xl shadow mt-3">
      {{ (isRegistrando) ? 'Registrando...' : 'Registrarme' }}
    </button>

    <p class="text-gray-400 text-center text-sm mt-2">
      ¬øYa tienes una cuenta?
      <a routerLink="/ingresar" class="text-green-400 hover:underline cursor-pointer">Iniciar sesi√≥n</a>
    </p>

  </form>


  <app-modal-normal #modalRegistroExitoso titulo="Mensaje de aplicaci√≥n.">

    <p> {{ mensajeRegistroExitoso }} </p>

    <div class="flex justify-end mt-4">
      <button (click)="cerrarModalYRedireccionar()"
        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium transition cursor-pointer">
        Aceptar 
      </button>
    </div>

  </app-modal-normal>

  <app-modal-normal #modalError titulo="Mensaje de error.">

    @if (mensajeErrorTryCatch != '') {
    <p class="text-red-500"> {{ mensajeErrorTryCatch }} </p>
    }

    @if (multiplesErrores.length > 0) {
    <ul>
      @for (error of multiplesErrores; track $index) {
      <li class="text-red-500 text-sm"> {{ error }} </li>
      }
    </ul>
    }

    <div class="flex justify-end mt-4">
      <button (click)="modalError.cerrar(); mensajeErrorTryCatch = ''; multiplesErrores = []"
        class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium transition cursor-pointer">
        Aceptar</button>
    </div>
  </app-modal-normal>

</section>
